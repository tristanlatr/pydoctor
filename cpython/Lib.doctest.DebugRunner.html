<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>Lib.doctest.DebugRunner : API documentation</title>

    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
  </head>
  <body>

    <nav class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="index.html">
            Python3.8 API Documentation
          </a>
        </div>
      </div>
    </nav>

    <div id="showPrivate">
      <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
    </div>

    <div class="container">

      <div class="page-header">
        <h1 class="class"><code><a href="Lib.html" class="code" data-type="Package">Lib</a>.<a href="Lib.doctest.html" class="code" data-type="Module">doctest</a>.<a href="Lib.doctest.DebugRunner.html" class="code" data-type="Class">DebugRunner</a></code></h1>
      </div>

      <div class="categoryHeader">
        class documentation
      </div>

      <div class="extrasDocstring">
        <p><code><span class="py-keyword">class</span> Lib.doctest.DebugRunner(<a href="Lib.doctest.DocTestRunner.html" class="code" data-type="Class">DocTestRunner</a>):</code></p>
        <p><a href="classIndex.html#Lib.doctest.DebugRunner">View In Hierarchy</a></p>
      </div>

      <div class="moduleDocstring">
        <div><p class="pre">Run doc tests but raise an exception as soon as there is a failure.

If an unexpected exception occurs, an UnexpectedException is raised.
It contains the test, the example, and the original exception:

  &gt;&gt;&gt; runner = DebugRunner(verbose=False)
  &gt;&gt;&gt; test = DocTestParser().get_doctest('&gt;&gt;&gt; raise KeyError\n42',
  ...                                    {}, 'foo', 'foo.py', 0)
  &gt;&gt;&gt; try:
  ...     runner.run(test)
  ... except UnexpectedException as f:
  ...     failure = f

  &gt;&gt;&gt; failure.test is test
  True

  &gt;&gt;&gt; failure.example.want
  '42\n'

  &gt;&gt;&gt; exc_info = failure.exc_info
  &gt;&gt;&gt; raise exc_info[1] # Already has the traceback
  Traceback (most recent call last):
  ...
  KeyError

We wrap the original exception to give the calling application
access to the test and example information.

If the output doesn't match, then a DocTestFailure is raised:

  &gt;&gt;&gt; test = DocTestParser().get_doctest('''
  ...      &gt;&gt;&gt; x = 1
  ...      &gt;&gt;&gt; x
  ...      2
  ...      ''', {}, 'foo', 'foo.py', 0)

  &gt;&gt;&gt; try:
  ...    runner.run(test)
  ... except DocTestFailure as f:
  ...    failure = f

DocTestFailure objects provide access to the test:

  &gt;&gt;&gt; failure.test is test
  True

As well as to the example:

  &gt;&gt;&gt; failure.example.want
  '2\n'

and the actual output:

  &gt;&gt;&gt; failure.got
  '1\n'

If a failure or error occurs, the globals are left intact:

  &gt;&gt;&gt; del test.globs['__builtins__']
  &gt;&gt;&gt; test.globs
  {'x': 1}

  &gt;&gt;&gt; test = DocTestParser().get_doctest('''
  ...      &gt;&gt;&gt; x = 2
  ...      &gt;&gt;&gt; raise KeyError
  ...      ''', {}, 'foo', 'foo.py', 0)

  &gt;&gt;&gt; runner.run(test)
  Traceback (most recent call last):
  ...
  doctest.UnexpectedException: &lt;DocTest foo from foo.py:0 (2 examples)&gt;

  &gt;&gt;&gt; del test.globs['__builtins__']
  &gt;&gt;&gt; test.globs
  {'x': 2}

But the globals are cleared if there is no error:

  &gt;&gt;&gt; test = DocTestParser().get_doctest('''
  ...      &gt;&gt;&gt; x = 2
  ...      ''', {}, 'foo', 'foo.py', 0)

  &gt;&gt;&gt; runner.run(test)
  TestResults(failed=0, attempted=1)

  &gt;&gt;&gt; test.globs
  {}</p></div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id1123">
  
  <tr class="method">
    
    <td>Method</td>
    <td><a href="Lib.doctest.DebugRunner.html#run" class="code" data-type="Method">run</a></td>
    <td><span>Run the examples in `test`, and display the results using the writer function `out`.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><a href="Lib.doctest.DebugRunner.html#report_unexpected_exception" class="code" data-type="Method">report_unexpected_exception</a></td>
    <td><span>Report that the given example raised an unexpected exception.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><a href="Lib.doctest.DebugRunner.html#report_failure" class="code" data-type="Method">report_failure</a></td>
    <td><span>Report that the given example failed.</span></td>
  </tr>
</table>
        
          <p class="inheritedFrom">
            Inherited from <a href="Lib.doctest.DocTestRunner.html" class="code" data-type="Class">DocTestRunner</a>:
          </p>
          <table class="children sortable" id="id1124">
  
  <tr class="baseclassvariable">
    
    <td>Class Variable</td>
    <td><a href="Lib.doctest.DocTestRunner.html#DIVIDER" class="code" data-type="Class Variable">DIVIDER</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><a href="Lib.doctest.DocTestRunner.html#__init__" class="code" data-type="Method">__init__</a></td>
    <td><span>Create a new test runner.</span></td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><a href="Lib.doctest.DocTestRunner.html#optionflags" class="code" data-type="Instance Variable">optionflags</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><a href="Lib.doctest.DocTestRunner.html#original_optionflags" class="code" data-type="Instance Variable">original_optionflags</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><a href="Lib.doctest.DocTestRunner.html#tries" class="code" data-type="Instance Variable">tries</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><a href="Lib.doctest.DocTestRunner.html#failures" class="code" data-type="Instance Variable">failures</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><a href="Lib.doctest.DocTestRunner.html#report_start" class="code" data-type="Method">report_start</a></td>
    <td><span>Report that the test runner is about to process the given example.  (Only displays a message if verbose=True)</span></td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><a href="Lib.doctest.DocTestRunner.html#report_success" class="code" data-type="Method">report_success</a></td>
    <td><span>Report that the given example ran successfully.  (Only displays a message if verbose=True)</span></td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><a href="Lib.doctest.DocTestRunner.html#test" class="code" data-type="Instance Variable">test</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><a href="Lib.doctest.DocTestRunner.html#debugger" class="code" data-type="Instance Variable">debugger</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><a href="Lib.doctest.DocTestRunner.html#save_linecache_getlines" class="code" data-type="Instance Variable">save_linecache_getlines</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><a href="Lib.doctest.DocTestRunner.html#summarize" class="code" data-type="Method">summarize</a></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><a href="Lib.doctest.DocTestRunner.html#merge" class="code" data-type="Method">merge</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseinstancevariable private">
    
    <td>Instance Variable</td>
    <td><a href="Lib.doctest.DocTestRunner.html#_checker" class="code" data-type="Instance Variable">_checker</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseinstancevariable private">
    
    <td>Instance Variable</td>
    <td><a href="Lib.doctest.DocTestRunner.html#_verbose" class="code" data-type="Instance Variable">_verbose</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseinstancevariable private">
    
    <td>Instance Variable</td>
    <td><a href="Lib.doctest.DocTestRunner.html#_name2ft" class="code" data-type="Instance Variable">_name2ft</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseinstancevariable private">
    
    <td>Instance Variable</td>
    <td><a href="Lib.doctest.DocTestRunner.html#_fakeout" class="code" data-type="Instance Variable">_fakeout</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="basemethod private">
    
    <td>Method</td>
    <td><a href="Lib.doctest.DocTestRunner.html#_failure_header" class="code" data-type="Method">_failure_header</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="basemethod private">
    
    <td>Method</td>
    <td><a href="Lib.doctest.DocTestRunner.html#__run" class="code" data-type="Method">__run</a></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="basemethod private">
    
    <td>Method</td>
    <td><a href="Lib.doctest.DocTestRunner.html#__record_outcome" class="code" data-type="Method">__record_outcome</a></td>
    <td><span>Record the fact that the given DocTest (`test`) generated `f` failures out of `t` tried examples.</span></td>
  </tr><tr class="baseclassvariable private">
    
    <td>Class Variable</td>
    <td><a href="Lib.doctest.DocTestRunner.html#__LINECACHE_FILENAME_RE" class="code" data-type="Class Variable">__LINECACHE_FILENAME_RE</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="basemethod private">
    
    <td>Method</td>
    <td><a href="Lib.doctest.DocTestRunner.html#__patched_linecache_getlines" class="code" data-type="Method">__patched_linecache_getlines</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
          

          
      </div>

      <div id="childList">

        <div class="basemethod">
  
  <a name="Lib.doctest.DebugRunner.run">
    
  </a>
  <a name="run">
    
  </a>
  <div class="functionHeader">
    
    def
    run(self, test, compileflags=None, out=None, clear_globs=(True)):
    
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">overrides <a href="Lib.doctest.DocTestRunner.html#run" class="code" data-type="Method">Lib.doctest.DocTestRunner.run</a></div>
    
    <div><p class="pre">Run the examples in `test`, and display the results using the
writer function `out`.

The examples are run in the namespace `test.globs`.  If
`clear_globs` is true (the default), then this namespace will
be cleared after the test runs, to help with garbage
collection.  If you would like to examine the namespace after
the test completes, then use `clear_globs=False`.

`compileflags` gives the set of flags that should be used by
the Python compiler when running the examples.  If not
specified, then it will default to the set of future-import
flags that apply to `globs`.

The output of each example is checked using
`DocTestRunner.check_output`, and the results are formatted by
the `DocTestRunner.report_*` methods.</p></div>
  </div>
</div><div class="basemethod">
  
  <a name="Lib.doctest.DebugRunner.report_unexpected_exception">
    
  </a>
  <a name="report_unexpected_exception">
    
  </a>
  <div class="functionHeader">
    
    def
    report_unexpected_exception(self, out, test, example, exc_info):
    
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">overrides <a href="Lib.doctest.DocTestRunner.html#report_unexpected_exception" class="code" data-type="Method">Lib.doctest.DocTestRunner.report_unexpected_exception</a></div>
    
    <div><p class="pre">Report that the given example raised an unexpected exception.</p></div>
  </div>
</div><div class="basemethod">
  
  <a name="Lib.doctest.DebugRunner.report_failure">
    
  </a>
  <a name="report_failure">
    
  </a>
  <div class="functionHeader">
    
    def
    report_failure(self, out, test, example, got):
    
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">overrides <a href="Lib.doctest.DocTestRunner.html#report_failure" class="code" data-type="Method">Lib.doctest.DocTestRunner.report_failure</a></div>
    
    <div><p class="pre">Report that the given example failed.</p></div>
  </div>
</div>

      </div>
      <address>
        <a href="index.html">API Documentation</a> for Python3.8, generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a> 20.7.1 at 2020-11-24 05:11:37.
      </address>

    </div>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>